<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_40) on Sat Dec 07 20:46:34 CET 2013 -->
<meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
<title>KarmaManager</title>
<meta name="date" content="2013-12-07">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="KarmaManager";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/KarmaManager.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../dstm2/manager/GreedyManager.html" title="class in dstm2.manager"><span class="strong">Prev Class</span></a></li>
<li><a href="../../dstm2/manager/KindergartenManager.html" title="class in dstm2.manager"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?dstm2/manager/KarmaManager.html" target="_top">Frames</a></li>
<li><a href="KarmaManager.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">dstm2.manager</div>
<h2 title="Class KarmaManager" class="title">Class KarmaManager</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li><a href="../../dstm2/manager/BaseManager.html" title="class in dstm2.manager">dstm2.manager.BaseManager</a></li>
<li>
<ul class="inheritance">
<li>dstm2.manager.KarmaManager</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../dstm2/ContentionManager.html" title="interface in dstm2">ContentionManager</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">KarmaManager</span>
extends <a href="../../dstm2/manager/BaseManager.html" title="class in dstm2.manager">BaseManager</a></pre>
<div class="block">Uses "karmic debt management" to resolve conflicts.  Roughly, a
 thread gains "karma" for every object it successfully opens, and
 threads with greater karma can abort transactions of other threads.
 A thread's karma is reset every time it successfully commits a
 transaction, but not when it is aborted (hence the name).

 When conflict occurs between two transactions, the one with the
 greater accumulated karma wins. If the other transaction holds a
 block, it gets aborted immediately. Otherwise, the "lesser"
 transaction backs off for a fixed interval and up to the square of
 the difference in karma bethere the two.

 The key idea behind this policy is that it allows long transactions
 to eventually finish even if mixed with lots of competing shorter
 transactions. This happens because the longer transaction will
 accumulate more and more karma each time it gets aborted, so it
 will eventually reach "critical mass" and be able to bulldoze its
 way through to get its work done.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../dstm2/manager/KarmaManager.html#KarmaManager()">KarmaManager</a></strong>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../dstm2/manager/KarmaManager.html#committed()">committed</a></strong>()</code>
<div class="block">Reset priority only on commit.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../dstm2/manager/KarmaManager.html#openSucceeded()">openSucceeded</a></strong>()</code>
<div class="block">Notify manager that object was opened.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../dstm2/manager/KarmaManager.html#resolveConflict(dstm2.Transaction, dstm2.Transaction)">resolveConflict</a></strong>(<a href="../../dstm2/Transaction.html" title="class in dstm2">Transaction</a>&nbsp;me,
               <a href="../../dstm2/Transaction.html" title="class in dstm2">Transaction</a>&nbsp;other)</code>
<div class="block">Either give the writer a chance to finish it, abort it, or both.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_dstm2.manager.BaseManager">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;dstm2.manager.<a href="../../dstm2/manager/BaseManager.html" title="class in dstm2.manager">BaseManager</a></h3>
<code><a href="../../dstm2/manager/BaseManager.html#getPriority()">getPriority</a>, <a href="../../dstm2/manager/BaseManager.html#resolveConflict(dstm2.Transaction, java.util.Collection)">resolveConflict</a>, <a href="../../dstm2/manager/BaseManager.html#setPriority(long)">setPriority</a>, <a href="../../dstm2/manager/BaseManager.html#sleep(int)">sleep</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="KarmaManager()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>KarmaManager</h4>
<pre>public&nbsp;KarmaManager()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="resolveConflict(dstm2.Transaction, dstm2.Transaction)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>resolveConflict</h4>
<pre>public&nbsp;void&nbsp;resolveConflict(<a href="../../dstm2/Transaction.html" title="class in dstm2">Transaction</a>&nbsp;me,
                   <a href="../../dstm2/Transaction.html" title="class in dstm2">Transaction</a>&nbsp;other)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../dstm2/ContentionManager.html#resolveConflict(dstm2.Transaction, dstm2.Transaction)">ContentionManager</a></code></strong></div>
<div class="block">Either give the writer a chance to finish it, abort it, or both.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../dstm2/ContentionManager.html#resolveConflict(dstm2.Transaction, dstm2.Transaction)">resolveConflict</a></code>&nbsp;in interface&nbsp;<code><a href="../../dstm2/ContentionManager.html" title="interface in dstm2">ContentionManager</a></code></dd>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../dstm2/manager/BaseManager.html#resolveConflict(dstm2.Transaction, dstm2.Transaction)">resolveConflict</a></code>&nbsp;in class&nbsp;<code><a href="../../dstm2/manager/BaseManager.html" title="class in dstm2.manager">BaseManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>me</code> - Calling transaction.</dd><dd><code>other</code> - Transaction that's in my way.</dd></dl>
</li>
</ul>
<a name="committed()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>committed</h4>
<pre>public&nbsp;void&nbsp;committed()</pre>
<div class="block">Reset priority only on commit. On abort, restart with previous priority.
 "Cosmic debt"?. More like cosmic credit.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../dstm2/ContentionManager.html#committed()">committed</a></code>&nbsp;in interface&nbsp;<code><a href="../../dstm2/ContentionManager.html" title="interface in dstm2">ContentionManager</a></code></dd>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../dstm2/manager/BaseManager.html#committed()">committed</a></code>&nbsp;in class&nbsp;<code><a href="../../dstm2/manager/BaseManager.html" title="class in dstm2.manager">BaseManager</a></code></dd>
</dl>
</li>
</ul>
<a name="openSucceeded()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>openSucceeded</h4>
<pre>public&nbsp;void&nbsp;openSucceeded()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../dstm2/ContentionManager.html#openSucceeded()">ContentionManager</a></code></strong></div>
<div class="block">Notify manager that object was opened.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../dstm2/ContentionManager.html#openSucceeded()">openSucceeded</a></code>&nbsp;in interface&nbsp;<code><a href="../../dstm2/ContentionManager.html" title="interface in dstm2">ContentionManager</a></code></dd>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../dstm2/manager/BaseManager.html#openSucceeded()">openSucceeded</a></code>&nbsp;in class&nbsp;<code><a href="../../dstm2/manager/BaseManager.html" title="class in dstm2.manager">BaseManager</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/KarmaManager.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../dstm2/manager/GreedyManager.html" title="class in dstm2.manager"><span class="strong">Prev Class</span></a></li>
<li><a href="../../dstm2/manager/KindergartenManager.html" title="class in dstm2.manager"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?dstm2/manager/KarmaManager.html" target="_top">Frames</a></li>
<li><a href="KarmaManager.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
